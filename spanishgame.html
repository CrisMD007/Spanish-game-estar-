<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Juego del verbo estar</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      transition: background-color 0.5s;
      background-color: #f0f8ff;
    }
    .question {
      font-size: 1.4em;
      margin-bottom: 20px;
    }
    .options button, .options input {
      display: block;
      margin: 10px auto;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 8px;
    }
    .options button {
      cursor: pointer;
      border: none;
      background-color: #87cefa;
    }
    .feedback {
      margin-top: 15px;
      font-size: 1.2em;
      font-weight: bold;
    }
    .score {
      font-size: 1.2em;
      margin-top: 30px;
    }
    .popup {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ccc;
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      display: none;
    }
    .popup button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background-color: #32cd32;
      color: white;
    }
  </style>
</head>
<body>

<h1>ðŸŽ® Juego: Â¿CÃ³mo se conjuga el verbo <em>estar</em>?</h1>
<div class="question" id="question"></div>
<div class="options" id="options"></div>
<div class="feedback" id="feedback"></div>
<div class="score" id="score"></div>

<!-- Ventana emergente para el nivel -->
<div class="popup" id="level-popup">
  <h2 id="level-text">Nivel 1</h2>
  <button onclick="empezarNivel()">Empezar</button>
</div>

<script>
  const preguntas = [
    // Nivel 1 - ElecciÃ³n de terminaciones
    { nivel: 1, pregunta: "Yo est___ en casa.", opciones: ["oy", "Ã¡", "Ã¡n"], correcta: "oy" },
    { nivel: 1, pregunta: "TÃº est____ muy feliz.", opciones: ["oy", "Ã¡s", "a"], correcta: "Ã¡s" },
    { nivel: 1, pregunta: "Ã‰l est____ en la tienda.", opciones: ["Ã¡", "oy", "Ã¡n"], correcta: "Ã¡" },

    // Nivel 2 - Entrada de texto
    { nivel: 2, pregunta: "Yo ____ hambriento.", correcta: "estoy", tipo: "texto" },
    { nivel: 2, pregunta: "TÃº ____ cansado.", correcta: "estÃ¡s", tipo: "texto" },
    { nivel: 2, pregunta: "Ã‰l ____ enfermo.", correcta: "estÃ¡", tipo: "texto" },
    { nivel: 2, pregunta: "Nosotros ____ listos.", correcta: "estamos", tipo: "texto" },
    { nivel: 2, pregunta: "Ellos ____ en casa.", correcta: "estÃ¡n", tipo: "texto" },

    // Nivel 3 - CorrecciÃ³n de frases
    { nivel: 3, pregunta: "TÃº estÃ¡ cansado.", opciones: ["CorrectoðŸ‘ðŸ»", "IncorrectoðŸ‘ŽðŸ»"], correcta: "IncorrectoðŸ‘ŽðŸ»" },
    { nivel: 3, pregunta: "Nosotros estamos en la fiesta.", opciones: ["CorrectoðŸ‘ðŸ»", "IncorrectoðŸ‘ŽðŸ»"], correcta: "CorrectoðŸ‘ðŸ»" },
    { nivel: 3, pregunta: "Ella estÃ¡ contenta.", opciones: ["CorrectoðŸ‘ðŸ»", "IncorrectoðŸ‘ŽðŸ»"], correcta: "CorrectoðŸ‘ðŸ»" },
    { nivel: 3, pregunta: "Ã‰l estÃ¡is en la tienda.", opciones: ["CorrectoðŸ‘ðŸ»", "IncorrectoðŸ‘ŽðŸ»"], correcta: "IncorrectoðŸ‘ŽðŸ»" },
    { nivel: 3, pregunta: "Vosotros estoy cansados.", opciones: ["CorrectoðŸ‘ðŸ»", "IncorrectoðŸ‘ŽðŸ»"], correcta: "IncorrectoðŸ‘ŽðŸ»" },

    // Nivel 4 - Preguntas mÃ¡s avanzadas
    { nivel: 4, pregunta: "Â¿DÃ³nde estÃ¡ el perro?", opciones: ["EstÃ¡ en la cama ðŸ›ï¸", "EstÃ¡ feliz ðŸ˜€", "EstÃ¡ dormido ðŸ˜´"], correcta: "EstÃ¡ en la cama ðŸ›ï¸" },
    { nivel: 4, pregunta: "Â¿QuÃ© estÃ¡ en la mesa?", opciones: ["El libro estÃ¡ en la mesa ðŸ“š", "EstÃ¡ corriendo ðŸƒ", "EstÃ¡ en la escuela ðŸ«"], correcta: "El libro estÃ¡ en la mesa ðŸ“š" },
    { nivel: 4, pregunta: "Â¿CÃ³mo estÃ¡ Ana?", opciones: ["EstÃ¡ cansada ðŸ˜´", "EstÃ¡ en la playa ðŸ–ï¸", "EstÃ¡ en el cine ðŸŽ¬"], correcta: "EstÃ¡ cansada ðŸ˜´" },
    { nivel: 4, pregunta: "Â¿CuÃ¡ndo estÃ¡ Ã©l en casa?", opciones: ["EstÃ¡ en la escuela ðŸ«", "EstÃ¡ en casa por la tarde ðŸŒ‡", "EstÃ¡ enojado ðŸ˜¡"], correcta: "EstÃ¡ en casa por la tarde ðŸŒ‡" },
    { nivel: 4, pregunta: "Â¿QuiÃ©n estÃ¡ triste?", opciones: ["Pedro estÃ¡ triste ðŸ‘¨ðŸ»", "EstÃ¡ en el parque ðŸŒ³", "EstÃ¡ estudiando ðŸ“š"], correcta: "Pedro estÃ¡ triste ðŸ‘¨ðŸ»" },
    { nivel: 4, pregunta: "Â¿Por quÃ© estÃ¡ ella preocupada?", opciones: ["Porque tiene un examen ðŸ“„ðŸ˜°", "Porque estÃ¡ en la silla ðŸª‘", "Porque estÃ¡ feliz ðŸ˜€"], correcta: "Porque tiene un examen ðŸ“„ðŸ˜°" }
  ];

  let indice = 0;
  let puntos = 0;
  let respuestasCorrectas = 0;
  let respuestasIncorrectas = 0;
  let nivelActual = preguntas[0].nivel;

  function cambiarColorFondo(nivel) {
    const colores = {
      1: "#b0e57c", // Verde pastel
      2: "#fff9c4", // Amarillo pastel
      3: "#ffcc80", // Naranja pastel
      4: "#ffcdd2"  // Rojo pastel
    };
    document.body.style.backgroundColor = colores[nivel] || "#f0f8ff";
  }

  function mostrarPregunta() {
    const pregunta = preguntas[indice];
    cambiarColorFondo(pregunta.nivel);
    document.getElementById("question").innerText = pregunta.pregunta;
    document.getElementById("options").innerHTML = "";
    document.getElementById("feedback").innerText = "";

    if (pregunta.tipo === "texto") {
      const input = document.createElement("input");
      input.type = "text";
      input.id = "respuestaTexto";
      input.placeholder = "Escribe tu respuesta aquÃ­";
      input.style.padding = "10px";
      input.style.fontSize = "1em";
      input.style.borderRadius = "8px";
      input.style.border = "1px solid #ccc";

      const boton = document.createElement("button");
      boton.textContent = "Enviar";
      boton.onclick = () => {
        const valorUsuario = document.getElementById("respuestaTexto").value.trim().toLowerCase();
        verificarRespuesta(valorUsuario);
      };

      document.getElementById("options").appendChild(input);
      document.getElementById("options").appendChild(boton);
    } else {
      pregunta.opciones.forEach(opcion => {
        const btn = document.createElement("button");
        btn.textContent = opcion;
        btn.onclick = () => verificarRespuesta(opcion);
        document.getElementById("options").appendChild(btn);
      });
    }
  }

  function verificarRespuesta(respuesta) {
    const actual = preguntas[indice];

    const esCorrecta = actual.tipo === "texto"
      ? respuesta === actual.correcta.toLowerCase()
      : respuesta === actual.correcta;

    if (esCorrecta) {
      document.getElementById("feedback").innerText = "âœ… Â¡Correcto!";
      puntos++;
      respuestasCorrectas++;
      setTimeout(() => siguientePregunta(), 1000);
    } else {
      document.getElementById("feedback").innerText = "âŒ Intenta otra vez.";
      respuestasIncorrectas++;
    }
  }

  function siguientePregunta() {
    indice++;
    if (indice >= preguntas.length) {
      mostrarResultado();
      return;
    }

    const nuevoNivel = preguntas[indice].nivel;
    if (nuevoNivel !== nivelActual) {
      nivelActual = nuevoNivel;
      mostrarPopupNivel(nivelActual);
    } else {
      mostrarPregunta();
    }
  }

  function mostrarResultado() {
    const total = respuestasCorrectas + respuestasIncorrectas;
    const porcentaje = total > 0 ? (respuestasCorrectas / total) * 100 : 0;
    document.getElementById("question").innerText = "Juego terminado ðŸŽ‰";
    document.getElementById("options").innerHTML = "";
    document.getElementById("feedback").innerText = "";
    document.getElementById("score").innerText =
      `Puntaje final: ${puntos} / ${preguntas.length} (${porcentaje.toFixed(2)}%) - Nota: ${Math.round(porcentaje)}/100`;
  }

  function empezarNivel() {
    document.getElementById("level-popup").style.display = "none";
    mostrarPregunta();
  }

  function mostrarPopupNivel(nivel) {
    document.getElementById("level-text").innerText = `Nivel ${nivel}`;
    document.getElementById("level-popup").style.display = "block";
  }

  // Comenzar mostrando el primer popup
  mostrarPopupNivel(nivelActual);
</script>

</body>
</html>
